<!-- property-details.html (Green + White Real Estate Theme) -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuxEstate - Property Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        .success-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            animation: fadeIn 0.3s ease-in-out;
        }
        .success-popup-overlay.show {
            display: flex;
        }
        .success-popup-box {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 90%;
            animation: slideUp 0.4s ease-out;
        }
        .success-popup-box i {
            font-size: 60px;
            color: #2ecc71;
            margin-bottom: 1.5rem;
            animation: scaleIn 0.5s ease-out;
        }
        .success-popup-box h3 {
            font-size: 28px;
            color: #2ecc71;
            margin-bottom: 1rem;
            font-weight: 700;
        }
        .success-popup-box p {
            font-size: 18px;
            color: #666;
            margin-bottom: 2rem;
        }
        .success-popup-box .btn {
            padding: 10px 30px !important;
            font-size: 16px !important;
            font-weight: 600 !important;
            border-radius: 10px !important;
            background: linear-gradient(135deg, #2ecc71, #27ae60) !important;
            border: none !important;
            color: white !important;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3) !important;
        }
        .success-popup-box .btn:hover {
            background: linear-gradient(135deg, #27ae60, #229954) !important;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(46, 204, 113, 0.4) !important;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        @keyframes scaleIn {
            from {
                transform: scale(0);
            }
            to {
                transform: scale(1);
            }
        }
    </style>
</head>
<body>

<!-- HEADER -->
<header class="py-3 shadow-sm bg-white">
    <div class="container d-flex justify-content-between align-items-center">
        <div class="d-flex align-items-center gap-2 header-brand">
            <img src="logo.svg" alt="LuxEstate logo" class="header-logo">
            <h2 class="fw-bold text-success m-0">LuxEstate</h2>
        </div>
        <nav>
            <a href="dashboard.html" class="mx-2 text-dark"><i class="bi bi-speedometer2 me-1"></i> Dashboard</a>
            <div class="dropdown properties-dropdown">
                <a href="properties.html" class="mx-2 text-dark dropdown-toggle" id="propertiesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-building me-1"></i> Properties <i class="bi bi-chevron-down"></i>
                </a>
                <ul class="dropdown-menu" aria-labelledby="propertiesDropdown">
                    <li><a class="dropdown-item" href="#" id="calculateBudgetBtn"><i class="bi bi-calculator"></i> Calculate Budget</a></li>
                    <li><a class="dropdown-item" href="properties.html"><i class="bi bi-grid"></i> View All Properties</a></li>
                </ul>
            </div>
            <div class="dropdown properties-dropdown">
                <a href="agents.html" class="mx-2 text-dark dropdown-toggle" id="agentsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-people me-1"></i> Agents <i class="bi bi-chevron-down"></i>
                </a>
                <ul class="dropdown-menu" aria-labelledby="agentsDropdown">
                    <li><a class="dropdown-item" href="agents.html"><i class="bi bi-people"></i> All Agents</a></li>
                    <li><a class="dropdown-item" href="contact.html"><i class="bi bi-envelope"></i> Book Your Agent</a></li>
                </ul>
            </div>

            <div class="dropdown profile-dropdown">
                <a href="#" class="mx-2 text-dark dropdown-toggle" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-person-circle me-1"></i> Profile
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                    <li><a class="dropdown-item" href="profile.html"><i class="bi bi-person me-2"></i> Personal Info</a></li>
                    <li><a class="dropdown-item" href="edit-profile.html"><i class="bi bi-pencil-square me-2"></i> Edit Profile</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="api/logout.php"><i class="bi bi-box-arrow-right me-2"></i> Logout</a></li>
                </ul>
            </div>

            <div class="dropdown info-dropdown">
                <a href="#" class="mx-2 text-dark dropdown-toggle" id="infoDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-info-circle me-1"></i> Info
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="infoDropdown">
                    <li><a class="dropdown-item" href="inbox.html"><i class="bi bi-inbox me-2"></i> Inbox</a></li>
                    <li><a class="dropdown-item" href="about.html"><i class="bi bi-building me-2"></i> About</a></li>
                    <li><a class="dropdown-item" href="faqs.html"><i class="bi bi-question-circle me-2"></i> FAQs</a></li>
                </ul>
            </div>
        </nav>
    </div>
</header><!-- PROPERTY DETAILS -->
<section class="py-5 scroll-animate">
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-8 scroll-animate scroll-animate-delay-1">
                <img id="propertyImage" src="p1.jpg" class="property-hero-img" alt="Property Image">

                <div class="d-flex flex-wrap justify-content-between align-items-start mt-4">
                    <div>
                        <p class="text-muted mb-1" id="propertyLocation">Beverly Hills, CA</p>
                        <h2 class="text-success fw-bold mb-2" id="propertyTitle">Modern Villa</h2>
                    </div>
                    <div class="text-lg-end">
                        <span class="badge bg-light text-success px-3 py-2 mb-2" id="propertyStatus">For Sale</span>
                        <p class="property-price mb-0" id="propertyPrice">$850,000</p>
                    </div>
                </div>

                <p class="lead text-muted" id="propertyHero">
                    Luxury villa with stunning garden view. Includes 4 bedrooms, 3 bathrooms, spacious living areas, and a modern kitchen.
                </p>

                <div class="row g-3 mt-1" id="propertyStats">
                    <!-- Stats injected via JS -->
                </div>

                <h4 class="mt-5 text-success">Highlights</h4>
                <ul class="list-group list-group-flush mb-4" id="propertyFeatures">
                    <!-- Highlights injected via JS -->
                </ul>

                <h4 class="text-success">Description</h4>
                <p class="text-muted" id="propertyDescription">
                    This modern villa offers a perfect blend of luxury and comfort. Its spacious interiors, beautiful garden, and high-quality finish make it a perfect family home.
                </p>
            </div>

            <div class="col-lg-4 scroll-animate scroll-animate-delay-2">
                <div class="p-4 shadow-sm rounded bg-light">
                    <h4 class="text-success fw-bold mb-3" id="propertyContactTitle">Contact Agent</h4>
                    <div class="d-flex align-items-center gap-3 mb-3">
                        <div class="avatar-circle" id="agentInitials">ST</div>
                        <div>
                            <p class="mb-0 fw-semibold" id="agentName">Sophia Turner</p>
                            <small class="text-muted" id="agentRole">Senior Listing Agent</small>
                        </div>
                    </div>
                    <ul class="list-unstyled contact-info-list mb-4">
                        <li><i class="bi bi-telephone"></i> <span id="agentPhone">+1 (555) 123-4567</span></li>
                        <li><i class="bi bi-envelope"></i> <span id="agentEmail">sophia@luxestate.com</span></li>
                    </ul>
                    <form id="propertyMessageForm">
                        <div class="mb-3">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" class="form-control" id="name" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="message" class="form-label">Message</label>
                            <textarea class="form-control" id="message" rows="4" placeholder="Hi, I'm interested in this property" required></textarea>
                        </div>
                        <input type="hidden" id="propertyField" name="property">
                        <button type="submit" class="btn btn-success w-100">Send Message</button>
                    </form>
                </div>

                <div class="p-4 shadow-sm rounded mt-4">
                    <h5 class="text-success">Nearby Essentials</h5>
                    <ul class="list-unstyled small mb-0" id="propertyNearby">
                        <!-- Nearby items injected via JS -->
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FOOTER -->
<footer>
    <div class="container">
        <div class="footer-content">
            <!-- About Section -->
            <div class="footer-section footer-about">
                <h5><i class="bi bi-house-heart-fill"></i> LuxEstate</h5>
                <p>Your premier destination for luxury real estate. We connect you with extraordinary properties that match your lifestyle and aspirations.</p>
                <div class="social-links">
                    <a href="https://www.facebook.com" title="Facebook"><i class="bi bi-facebook"></i></a>
                    <a href="https://www.twitter.com" title="Twitter"><i class="bi bi-twitter"></i></a>
                    <a href="https://www.instagram.com" title="Instagram"><i class="bi bi-instagram"></i></a>
                    <a href="https://www.linkdin.com" title="LinkedIn"><i class="bi bi-linkedin"></i></a>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="footer-section">
                <h5><i class="bi bi-lightning-fill"></i> Quick Links</h5>
                <ul>
                    <li><a href="dashboard.html"><i class="bi bi-house-door"></i> Dashboard</a></li>
                    <li><a href="properties.html"><i class="bi bi-grid-3x2"></i> Properties</a></li>
                    <li><a href="about.html"><i class="bi bi-info-circle"></i> About Us</a></li>
                    <li><a href="agents.html"><i class="bi bi-people"></i> Our Agents</a></li>
                </ul>
            </div>

            <!-- Services -->
            <div class="footer-section">
                <h5><i class="bi bi-briefcase-fill"></i> Services</h5>
                <ul>
                    <li><a href="properties.html#fullpayproperties"><i class="bi bi-house-fill"></i>Properties sale in full payment</a></li>
                    <li><a href="properties.html#installmentsProperties"><i class="bi bi-house-fill"></i>Properties sale in Installments</a></li>
                    <li><a href="properties.html#rentalProperties"><i class="bi bi-key-fill"></i> Property Rentals</a></li>
                    <li><a href="#" data-bs-toggle="modal" data-bs-target="#budgetCalculatorModal"><i class="bi bi-graph-up-arrow"></i> Property Valuation</a></li>
                </ul>
            </div>

            <!-- Contact & Support -->
            <div class="footer-section">
                <h5 style="font-size: 1rem;"><i class="bi bi-telephone-fill"></i> Contact Us</h5>
                <ul>
                    <li><a href="https://wa.me/923007323288" target="_blank" style="font-size: 0.85rem;"><i class="bi bi-telephone"></i> +92 3007323288</a></li>
                    <li><a href="mailto:umersaeed15991@gmail.com" style="font-size: 0.85rem;"><i class="bi bi-envelope"></i> umersaeed15991@gmail.com</a></li>
                    <li><a href="contact.html" style="font-size: 0.85rem;"><i class="bi bi-chat-dots"></i> Send Message</a></li>
                    <li><a href="faqs.html" style="font-size: 0.85rem;"><i class="bi bi-question-circle"></i> FAQs</a></li>
                </ul>
            </div>
        </div>

        <!-- Footer Bottom -->
        <div class="footer-bottom">
            <div class="copyright">&copy; 2025 LuxEstate. All Rights Reserved.</div>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms & Conditions</a>
                <a href="#">Cookie Policy</a>
            </div>
            <div class="footer-badge"><i class="bi bi-star-fill"></i> Trusted Since 2010</div>
        </div>
    </div>
</footer>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="main.js"></script>
<script>
  const propertyData = {
    p1: {
      name: "Modern Villa",
      price: "$850,000",
      status: "For Sale",
      location: "Beverly Hills, CA",
      hero: "Balinese-inspired villa with an infinity pool, glass atrium living room, and manicured gardens.",
      description:
        "LuxEstate's Modern Villa reimagines indoor-outdoor living with sliding glass walls, a chef's kitchen, spa-inspired primary suite, and private home office. Custom millwork, imported stone, and a whole-home smart system deliver a resort-level experience every day.",
      image: "p1.jpg",
      stats: [
        { icon: "bi-door-open", label: "Bedrooms", value: "4" },
        { icon: "bi-droplet", label: "Bathrooms", value: "3" },
        { icon: "bi-rulers", label: "Interior", value: "3,500 sqft" },
        { icon: "bi-car-front", label: "Parking", value: "2-car garage" }
      ],
      features: [
        "Saltwater infinity-edge pool",
        "Floor-to-ceiling glass atrium",
        "Smart security & climate",
        "Detached guest casita",
        "Outdoor kitchen & firepit"
      ],
      nearby: [
        { icon: "bi-geo-alt", text: "5 mins to Rodeo Drive" },
        { icon: "bi-shop", text: "Luxury boutiques & dining" },
        { icon: "bi-tree", text: "Steps from botanical trail" }
      ],
      agent: {
        name: "Sophia Turner",
        role: "Senior Listing Agent",
        phone: "+1 (555) 123-4567",
        email: "sophia@luxestate.com"
      }
    },
    p2: {
      name: "City Apartment",
      price: "$420,000",
      status: "For Sale",
      location: "Manhattan, NY",
      hero: "Sun-drenched apartment overlooking the skyline with concierge, gym, and valet parking.",
      description:
        "This corner residence pairs tall ceilings with designer finishes, quartz counters, and wide-plank oak floors. Residents enjoy a 24/7 doorman, sky lounge coworking hub, and private storage making downtown living effortless.",
      image: "p2.jpg",
      stats: [
        { icon: "bi-door-open", label: "Bedrooms", value: "2" },
        { icon: "bi-droplet", label: "Bathrooms", value: "2" },
        { icon: "bi-rulers", label: "Interior", value: "1,200 sqft" },
        { icon: "bi-building", label: "Floor", value: "28th" }
      ],
      features: [
        "Corner living room with skyline views",
        "Chef's kitchen with waterfall island",
        "In-unit laundry & custom closets",
        "Residents-only rooftop lounge"
      ],
      nearby: [
        { icon: "bi-train-front", text: "2 mins to subway lines 4/5/6" },
        { icon: "bi-cup-straw", text: "Gourmet cafes on the block" },
        { icon: "bi-mortarboard", text: "NYC public school district 02" }
      ],
      agent: {
        name: "Michael Reyes",
        role: "Luxury Condo Specialist",
        phone: "+1 (555) 222-8899",
        email: "michael@luxestate.com"
      }
    },
    p3: {
      name: "Cozy House",
      price: "$550,000",
      status: "For Sale",
      location: "Austin, TX",
      hero: "Warm family home with vaulted ceilings, play-ready backyard, and friendly cul-de-sac location.",
      description:
        "Updated inside and out, this Craftsman-style home welcomes you with a wraparound porch, shiplap accents, and a magazine-worthy kitchen. A flexible loft, mudroom, and covered patio make everyday living relaxed and functional.",
      image: "p3.jpg",
      stats: [
        { icon: "bi-door-open", label: "Bedrooms", value: "3" },
        { icon: "bi-droplet", label: "Bathrooms", value: "2" },
        { icon: "bi-rulers", label: "Interior", value: "2,000 sqft" },
        { icon: "bi-tree", label: "Lot", value: "0.3 acre" }
      ],
      features: [
        "Open-concept kitchen with farmhouse sink",
        "Vaulted living room with beams",
        "Outdoor dining pergola",
        "Detached workshop / studio"
      ],
      nearby: [
        { icon: "bi-bag-heart", text: "3 mins to boutique grocer" },
        { icon: "bi-bus-front", text: "Community park & splash pad" },
        { icon: "bi-mortarboard", text: "Zoned to Eanes ISD" }
      ],
      agent: {
        name: "Ava Chen",
        role: "Family Homes Advisor",
        phone: "+1 (555) 678-3344",
        email: "ava@luxestate.com"
      }
    },
    p4: {
      name: "Luxury Penthouse",
      price: "$1,200,000",
      status: "For Sale",
      location: "Miami, FL",
      hero: "Sky-high penthouse with wraparound terrace, private elevator, and ocean-to-city vistas.",
      description:
        "This penthouse spans the entire floor with glass curtain walls, Italian cabinetry, and a lounge-ready rooftop with plunge pool. Hotel-style services, valet, and marina access deliver an unrivaled resort lifestyle.",
      image: "p4.jpg",
      stats: [
        { icon: "bi-door-open", label: "Bedrooms", value: "3" },
        { icon: "bi-droplet", label: "Bathrooms", value: "3" },
        { icon: "bi-rulers", label: "Interior", value: "2,800 sqft" },
        { icon: "bi-sun", label: "Outdoor", value: "1,200 sqft terrace" }
      ],
      features: [
        "Private roof deck & plunge pool",
        "Glass wine wall & tasting bar",
        "His-and-hers spa baths",
        "24/7 concierge & valet"
      ],
      nearby: [
        { icon: "bi-geo-alt", text: "Bayfront Park promenade" },
        { icon: "bi-airplane", text: "15 mins to MIA airport" },
        { icon: "bi-shop", text: "Design District boutiques" }
      ],
      agent: {
        name: "Sophia Turner",
        role: "Senior Listing Agent",
        phone: "+1 (555) 123-4567",
        email: "sophia@luxestate.com"
      }
    },
    p5: {
      name: "Country Estate",
      price: "$950,000",
      status: "For Sale",
      location: "Napa Valley, CA",
      hero: "A sprawling estate with guest cottage, hobby vineyard, and sweeping vineyard views.",
      description:
        "Framed by mature oaks, this estate pairs rustic architecture with modern luxuries—think Wolf appliances, wine cellar, and spa wing. Terraced gardens, bocce court, and a tasting pergola set the stage for unforgettable weekends.",
      image: "p5.jpg",
      stats: [
        { icon: "bi-door-open", label: "Bedrooms", value: "5" },
        { icon: "bi-droplet", label: "Bathrooms", value: "4" },
        { icon: "bi-rulers", label: "Interior", value: "4,200 sqft" },
        { icon: "bi-tree", label: "Land", value: "2 acres" }
      ],
      features: [
        "Private tasting room & cellar",
        "Guest cottage with kitchenette",
        "Outdoor pizza oven & bocce court",
        "Solar + EV charging"
      ],
      nearby: [
        { icon: "bi-geo-alt", text: "Minutes to Silverado Trail" },
        { icon: "bi-cup-straw", text: "Award-winning wineries" },
        { icon: "bi-hospital", text: "10 mins to St. Helena Hospital" }
      ],
      agent: {
        name: "Liam Patel",
        role: "Estate & Vineyard Specialist",
        phone: "+1 (555) 901-2277",
        email: "liam@luxestate.com"
      }
    },
    p6: {
      name: "Beachfront Villa",
      price: "$1,500,000",
      status: "For Sale",
      location: "Malibu, CA",
      hero: "Steps from the sand with private cabanas, wraparound decks, and breezy coastal interiors.",
      description:
        "Designed for effortless entertaining, the villa showcases double-height living spaces, accordion doors, and a cinema lounge. A primary suite with soaking tub overlooks the Pacific for postcard mornings daily.",
      image: "p6.jpg",
      stats: [
        { icon: "bi-door-open", label: "Bedrooms", value: "4" },
        { icon: "bi-droplet", label: "Bathrooms", value: "3" },
        { icon: "bi-rulers", label: "Interior", value: "3,800 sqft" },
        { icon: "bi-water", label: "Frontage", value: "60 ft" }
      ],
      features: [
        "Private beach access & cabana",
        "Outdoor rain showers",
        "Cinema lounge & wet bar",
        "Solar panels + backup battery"
      ],
      nearby: [
        { icon: "bi-geo-alt", text: "Broad Beach private enclave" },
        { icon: "bi-shop", text: "Malibu Country Mart" },
        { icon: "bi-car-front", text: "Scenic Pacific Coast Highway" }
      ],
      agent: {
        name: "Sophia Turner",
        role: "Senior Listing Agent",
        phone: "+1 (555) 123-4567",
        email: "sophia@luxestate.com"
      }
    },
    p7: {
      name: "Urban Loft",
      price: "$610,000",
      status: "For Sale",
      location: "Seattle, WA",
      hero: "Industrial loft with double-height ceilings, steel beams, and private rooftop terrace.",
      description:
        "Concrete floors, exposed brick, and a custom steel staircase anchor this architect-owned loft. A glass-walled office, built-in library, and landscaped rooftop create stylish spaces for work and play.",
      image: "p7.jpg",
      stats: [
        { icon: "bi-door-open", label: "Bedrooms", value: "2" },
        { icon: "bi-droplet", label: "Bathrooms", value: "2" },
        { icon: "bi-rulers", label: "Interior", value: "1,600 sqft" },
        { icon: "bi-brightness-high", label: "Ceilings", value: "18 ft" }
      ],
      features: [
        "Floating mezzanine office",
        "Steel + glass pivot doors",
        "Rooftop terrace with city views",
        "Secure parking & bike storage"
      ],
      nearby: [
        { icon: "bi-geo-alt", text: "Heart of South Lake Union" },
        { icon: "bi-cup-hot", text: "Artisanal cafes & markets" },
        { icon: "bi-train-front", text: "Link light rail 3 blocks away" }
      ],
      agent: {
        name: "Ava Chen",
        role: "Urban Living Expert",
        phone: "+1 (555) 678-3344",
        email: "ava@luxestate.com"
      }
    },
    p8: {
      name: "Mountain Cabin",
      price: "$480,000",
      status: "For Sale",
      location: "Aspen, CO",
      hero: "Timber-frame cabin with stone fireplace, hot tub deck, and year-round trail access.",
      description:
        "A-frame lines meet luxury finishes—heated floors, cedar sauna, and gourmet kitchen. After skiing, unwind by the double-height stone hearth or soak under the stars on the cedar deck.",
      image: "p8.jpg",
      stats: [
        { icon: "bi-door-open", label: "Bedrooms", value: "3" },
        { icon: "bi-droplet", label: "Bathrooms", value: "2" },
        { icon: "bi-rulers", label: "Interior", value: "1,800 sqft" },
        { icon: "bi-arrow-up", label: "Elevation", value: "8,000 ft" }
      ],
      features: [
        "Cedar sauna & outdoor hot tub",
        "Heated garage & gear room",
        "Cathedral windows with alpine views",
        "Trailhead at end of driveway"
      ],
      nearby: [
        { icon: "bi-snow2", text: "8 mins to Aspen Mountain" },
        { icon: "bi-shop", text: "Village shops & dining" },
        { icon: "bi-tree", text: "Trail network + fly fishing" }
      ],
      agent: {
        name: "Liam Patel",
        role: "Retreat & Cabin Advisor",
        phone: "+1 (555) 901-2277",
        email: "liam@luxestate.com"
      }
    },
    p9: {
      name: "Smart Townhouse",
      price: "$720,000",
      status: "For Sale",
      location: "Chicago, IL",
      hero: "Four-level townhouse with integrated smart tech, rooftop deck, and heated garage.",
      description:
        "Entertain effortlessly with an open kitchen, Sonos audio, and glass doors to the fenced patio. The primary suite spans an entire floor with boutique-style closet and marble bath.",
      image: "p9.jpg",
      stats: [
        { icon: "bi-door-open", label: "Bedrooms", value: "4" },
        { icon: "bi-droplet", label: "Bathrooms", value: "3" },
        { icon: "bi-rulers", label: "Interior", value: "2,400 sqft" },
        { icon: "bi-lightning", label: "Smart", value: "Whole-home automation" }
      ],
      features: [
        "KitchenAid Pro appliance suite",
        "Heated 2-car garage",
        "Penthouse den + roof deck",
        "Hardwired security cameras"
      ],
      nearby: [
        { icon: "bi-train-front", text: "Blue Line station 2 blocks" },
        { icon: "bi-bag", text: "Wicker Park boutiques" },
        { icon: "bi-mortarboard", text: "Top-rated charter schools" }
      ],
      agent: {
        name: "Michael Reyes",
        role: "Luxury Condo Specialist",
        phone: "+1 (555) 222-8899",
        email: "michael@luxestate.com"
      }
    },
    p10: {
      name: "Garden Duplex",
      price: "$640,000",
      status: "For Sale",
      location: "Portland, OR",
      hero: "Biophilic duplex with glass staircase, edible garden, and studio flex space.",
      description:
        "Polished concrete floors, custom cabinetry, and skylights craft a bright contemporary vibe. French doors spill out to a landscaped courtyard with raised planters and outdoor living room.",
      image: "p10.jpg",
      stats: [
        { icon: "bi-door-open", label: "Bedrooms", value: "3" },
        { icon: "bi-droplet", label: "Bathrooms", value: "3" },
        { icon: "bi-rulers", label: "Interior", value: "2,100 sqft" },
        { icon: "bi-flower3", label: "Garden", value: "Private courtyard" }
      ],
      features: [
        "Glass staircase with hidden lighting",
        "Detached studio for WFH or guests",
        "Rainwater harvesting system",
        "Two-car EV-ready carport"
      ],
      nearby: [
        { icon: "bi-tree", text: "Rose City Park & trails" },
        { icon: "bi-shop", text: "Local artisan markets" },
        { icon: "bi-bus-front", text: "MAX light rail 1 block" }
      ],
      agent: {
        name: "Ava Chen",
        role: "Design Home Curator",
        phone: "+1 (555) 678-3344",
        email: "ava@luxestate.com"
      }
    }
  };

  document.addEventListener("DOMContentLoaded", () => {
    const params = new URLSearchParams(window.location.search);
    const propertyId = params.get("id") || "p1";
    const property = propertyData[propertyId] || propertyData["p1"];

    const setText = (id, value) => {
      const el = document.getElementById(id);
      if (el && value) el.textContent = value;
    };

    document.title = `LuxEstate - ${property.name}`;

    const imageEl = document.getElementById("propertyImage");
    if (imageEl) {
      imageEl.src = property.image;
      imageEl.alt = property.name;
    }

    setText("propertyTitle", property.name);
    setText("propertyPrice", property.price);
    setText("propertyLocation", property.location);
    setText("propertyStatus", property.status);
    setText("propertyHero", property.hero);
    setText("propertyDescription", property.description);
    setText("propertyContactTitle", `Schedule a tour of ${property.name}`);

    const statsWrapper = document.getElementById("propertyStats");
    if (statsWrapper && property.stats) {
      statsWrapper.innerHTML = property.stats
        .map(
          (stat) => `
        <div class="col-6 col-md-3">
            <div class="property-stat h-100">
                <i class="bi ${stat.icon}"></i>
                <div>
                    <small>${stat.label}</small>
                    <strong>${stat.value}</strong>
                </div>
            </div>
        </div>`
        )
        .join("");
    }

    const featureList = document.getElementById("propertyFeatures");
    if (featureList && property.features) {
      featureList.innerHTML = property.features
        .map((feature) => `<li class="list-group-item">${feature}</li>`)
        .join("");
    }

    const nearbyList = document.getElementById("propertyNearby");
    if (nearbyList && property.nearby) {
      nearbyList.innerHTML = property.nearby
        .map(
          (item) =>
            `<li class="mb-2"><i class="bi ${item.icon}"></i><span>${item.text}</span></li>`
        )
        .join("");
    }

    if (property.agent) {
      setText("agentName", property.agent.name);
      setText("agentRole", property.agent.role);
      setText("agentPhone", property.agent.phone);
      setText("agentEmail", property.agent.email);
      const initials = property.agent.name
        .split(" ")
        .map((part) => part[0])
        .join("")
        .slice(0, 2)
        .toUpperCase();
      setText("agentInitials", initials);
    }

    const messageField = document.getElementById("message");
    if (messageField) {
      messageField.placeholder = `Hi, I'm interested in ${property.name}. Please send more details.`;
    }
    const propertyField = document.getElementById("propertyField");
    if (propertyField) {
      propertyField.value = property.name;
    }

    // Auto-fill form with logged-in user data
    loadUserData();
  });

  // Auto-fill form with logged-in user data
  function loadUserData() {
    fetch('api/user/profile.php', {
      method: 'GET',
      credentials: 'same-origin'
    })
    .then(response => {
      if (response.status === 401) {
        // User not logged in, don't fill form
        return null;
      }
      return response.json();
    })
    .then(data => {
      if (data && data.success && data.profile) {
        const profile = data.profile;
        
        // Fill name field
        const nameField = document.getElementById('name');
        if (nameField && !nameField.value) {
          nameField.value = profile.fullName || profile.name || '';
        }
        
        // Fill email field
        const emailField = document.getElementById('email');
        if (emailField && !emailField.value) {
          emailField.value = profile.email || '';
        }
      }
    })
    .catch(error => {
      console.error('Error loading user data:', error);
      // Silently fail - user might not be logged in
    });
  }

  // Handle form submission
  document.getElementById('propertyMessageForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = {
      name: document.getElementById('name').value,
      email: document.getElementById('email').value,
      message: document.getElementById('message').value,
      property: document.getElementById('propertyField').value
    };
    
    const submitBtn = this.querySelector('button[type="submit"]');
    const originalText = submitBtn.innerHTML;
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="bi bi-hourglass-split me-2"></i>Sending...';
    
    fetch('api/user/property_message.php', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(formData)
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        // Show success popup
        showSuccessPopup();
        
        // Reset form
        document.getElementById('propertyMessageForm').reset();
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalText;
        
        // Re-fill user data if logged in
        loadUserData();
      } else {
        alert('Error: ' + (data.error || 'Failed to send message'));
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalText;
      }
    })
    .catch(error => {
      console.error('Error sending message:', error);
      alert('An error occurred while sending the message. Please try again.');
      submitBtn.disabled = false;
      submitBtn.innerHTML = originalText;
    });
  });

  // Show success popup
  function showSuccessPopup() {
    const popup = document.getElementById('successPopup');
    popup.classList.add('show');
  }

  // Close success popup
  function closeSuccessPopup() {
    const popup = document.getElementById('successPopup');
    popup.classList.remove('show');
  }
</script>

<!-- Success Popup Box -->
<div class="success-popup-overlay" id="successPopup" onclick="if(event.target === this) closeSuccessPopup()">
    <div class="success-popup-box">
        <i class="bi bi-check-circle-fill"></i>
        <h3>Message Send Successfully!</h3>
        <p>Your message has been sent. We'll get back to you soon.</p>
        <button class="btn btn-success btn-lg" onclick="closeSuccessPopup()">
            OK
        </button>
    </div>
</div>

<!-- Budget Calculator Modal -->
<div class="modal fade" id="budgetCalculatorModal" tabindex="-1" aria-labelledby="budgetCalculatorModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-success text-white">
        <h5 class="modal-title" id="budgetCalculatorModalLabel"><i class="bi bi-calculator"></i> Budget Calculator</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="budgetCalculatorForm">
          <div class="text-center mb-4">
            <p class="lead">How would you like to pay?</p>
          </div>
          <div class="d-grid gap-3">
            <button type="button" class="btn btn-outline-success btn-lg payment-option" data-type="installments">
              <i class="bi bi-calendar-check me-2"></i>Installments
            </button>
            <button type="button" class="btn btn-outline-success btn-lg payment-option" data-type="full-payment">
              <i class="bi bi-cash-coin me-2"></i>Full Payment
            </button>
            <button type="button" class="btn btn-outline-success btn-lg payment-option" data-type="rent">
              <i class="bi bi-house-door me-2"></i>Rent
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

</body>
</html>
